<!DOCTYPE html>
<html lang="">
<head>
    <meta charset="UTF-8" />
    <link rel="stylesheet" href="/css/index.css">
    <title>Surftrak Fixit</title>
</head>
<body>
    <div class="header">
        <h2>Surftrak status</h2>
        <p id="sts_extension_down" class="status-error">
            Extension is down
        </p>
        <p id="sts_sub_down" class="status-hidden">
            ArduSub is down
        </p>
        <p id="sts_reboot_required" class="status-hidden">
            Reboot required
            <button onclick="postFixit('reboot')">reboot</button>
        </p>
        <p id="sts_waiting_for_reboot" class="status-hidden">
            Waiting for reboot to complete
        </p>
        <p id="prb_rangefinder_timeout" class="status-hidden">
            Not receiving RANGEFINDER messages
        </p>
        <p id="prb_global_position_int_timeout" class="status-hidden">
            Not receiving GLOBAL_POSITION_INT messages
        </p>
        <p id="prb_no_sensor_msgs" class="status-hidden">
            RNGFND1_TYPE is 10 (MAVLink), but there are no down-facing DISTANCE_SENSOR messages
        </p>
        <p id="prb_too_many_sensor_msgs" class="status-hidden">
            There are DISTANCE_SENSOR messages from 2 different sources, they may conflict
        </p>
        <p id="prb_bad_type" class="status-hidden">
            Did you mean to set RNGFND1_TYPE to 10 (MAVLink)?
            <button onclick="postFixit('prb_bad_type')">Fix it</button>
        </p>
        <p id="prb_bad_orient" class="status-hidden">
            RNGFND1_ORIENT must be set to 25 (down-facing)
            <button onclick="postFixit('prb_bad_orient')">Fix it</button>
        </p>
        <p id="prb_bad_max" class="status-hidden">
            RNGFND1_MAX_CM is 700cm, did you mean 5000cm?
            <button onclick="postFixit('prb_bad_max')">Fix it</button>
        </p>
        <p id="prb_bad_kpv" class="status-hidden">
            To reduce oscillation, set PSC_JERK_Z to 8 and PILOT_ACCEL_Z to 500
            <button onclick="postFixit('prb_bad_kpv')">Fix it</button>
        </p>
        <p id="prb_no_btn" class="status-hidden">
            No joystick button for Surftrak, a common fix is to set BTN0_FUNCTION to 13
            <button onclick="postFixit('prb_no_btn')">Fix it</button>
        </p>
    </div>
    <div id="sensor_ping" class="status-hidden">
        <p class="section-header">Receiving down-facing DISTANCE_SENSOR messages from a Ping rangefinder</p>
        <div class="grid2-container">
            <div class="card"><p>Distance (m)</p><h2 id="ping_distance">Unknown</h2></div>
            <div class="card"><p>Signal quality (0-100)</p><h2 id="ping_sq">Unknown</h2></div>
        </div>
    </div>
    <div id="sensor_wl_dvl" class="status-hidden">
        <p class="section-header">Receiving down-facing DISTANCE_SENSOR messages from a Water Linked DVL</p>
        <div class="grid2-container">
            <div class="card"><p>Distance (m)</p><h2 id="wl_dvl_distance">Unknown</h2></div>
            <div class="card"><p>Signal quality (0-100)</p><h2 id="wl_dvl_sq">Unknown</h2></div>
        </div>
    </div>
    <p class="section-header">ArduSub state</p>
    <div class="grid2-container">
        <div class="card"><p>Altitude (m)</p><h2 id="relative_alt_m_card">Unknown</h2></div>
        <div class="card"><p>Rangefinder reading (m)</p><h2 id="rangefinder_m_card">Unknown</h2></div>
        <div class="card"><p>Rangefinder target (m)</p><h2 id="rf_target_m_card">Unknown</h2></div>
        <div class="card"><p>Seafloor altitude estimate (m)</p><h2 id="seafloor_alt_m_card">Unknown</h2></div>
    </div>
    <p class="section-header">Parameters</p>
    <div class="grid3-container">
        <div class="card"><p>RNGFND1_TYPE</p><h4 id="rngfnd1_type_card">Unknown</h4></div>
        <div class="card"><p>RNGFND1_ORIENT</p><h4 id="rngfnd1_orient_card">Unknown</h4></div>
        <div class="card"><p>RNGFND1_MIN_CM (cm)</p><h4 id="rngfnd1_min_cm_card">Unknown</h4></div>
        <div class="card"><p>RNGFND1_MAX_CM (cm)</p><h4 id="rngfnd1_max_cm_card">Unknown</h4></div>
        <div class="card"><p>PSC_JERK_Z (cm/s^3)</p><h4 id="psc_jerk_z_card">Unknown</h4></div>
        <div class="card"><p>PILOT_ACCEL_Z (m/s^2)</p><h4 id="pilot_accel_z_card">Unknown</h4></div>
        <div class="card"><p>SURFTRAK_DEPTH (cm)</p><h4 id="surftrak_depth_card">Unknown</h4></div>
        <div class="card"><p>RNGFND_SQ_MIN (0-100)</p><h4 id="rngfnd_sq_min_card">Unknown</h4></div>
        <div class="card"><p>Surftrak button assignment</p><h4 id="btn_surftrak_card">Unknown</h4></div>
    </div>
    <script src="/js/index.js"></script>
</body>
</html>
